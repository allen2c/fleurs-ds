{
    "name": "NVIDIA With PyTorch (ARM64)",
    "image": "nvcr.io/nvidia/pytorch:26.01-py3",
    "runArgs": [
        "--gpus",
        "all",
        "--shm-size",
        "128g",
        "--ipc=host",
        "--ulimit",
        "memlock=-1",
        "--ulimit",
        "stack=67108864",
        "--cap-add=SYS_PTRACE",
        "--security-opt=seccomp=unconfined"
    ],
    "workspaceMount": "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached",
    "workspaceFolder": "/workspace",
    "postCreateCommand": "sed -i 's|http://ports.ubuntu.com/ubuntu-ports|http://mirror.twds.com.tw/ubuntu-ports|g' /etc/apt/sources.list.d/ubuntu.sources && apt-get update && apt-get install -y libsndfile1 ffmpeg git-lfs htop nvtop direnv && pip install --no-cache-dir wandb ipykernel && bash /workspace/.devcontainer/setup-direnv.sh",
    "customizations": {
        "vscode": {
            "extensions": [
                "ms-python.python",
                "ms-python.vscode-pylance",
                "ms-toolsai.jupyter",
                "ms-python.debugpy"
            ],
            "settings": {
                "python.defaultInterpreterPath": "/usr/bin/python3",
                "python.analysis.extraPaths": [
                    "/usr/local/lib/python3.12/dist-packages",
                    "/usr/lib/python3/dist-packages"
                ]
            }
        }
    },
    "remoteUser": "root",
    "mounts": [
        "source=${localEnv:HOME}/.cache/huggingface,target=/root/.cache/huggingface,type=bind,consistency=cached",
        "source=${localEnv:HOME}/.cache/torch,target=/root/.cache/torch,type=bind,consistency=cached"
    ]
}